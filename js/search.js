// build time:Wed May 30 2018 20:09:54 GMT+0800 (中国标准时间)
var searchFunc=function(e,t,r){console.log("in searchFunc",e,t,r);"use strict";var a="<i id='local-search-close'>×</i>";var l=document.getElementById(t);var n=document.getElementById(r);n.innerHTML=a+"<ul><span class='local-search-empty'>Indexing and Loading ...<span></ul>";$.ajax({url:e,dataType:"xml",error:function(e,t,r){console.error(r)},success:function(e){console.log(e);var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()!=""?$("url",this).text():$("link",this).attr("href")}}).get();n.innerHTML="";l.addEventListener("input",function(){var e='<ul class="search-result-list">';var r=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="";if(this.value.trim().length<=0){return}t.forEach(function(t){var a=true;var l=[];if(!t.title||t.title.trim()===""){t.title="Untitled"}var n=t.title.trim();var i=n.toLowerCase();var s=t.content.trim().replace(/<[^>]+>/g,"");var c=s.toLowerCase();var o=t.url;var u=-1;var f=-1;var h=-1;if(c!==""){r.forEach(function(e,t){u=i.indexOf(e);f=c.indexOf(e);if(u<0&&f<0){a=false}else{if(f<0){f=0}if(t==0){h=f}}})}else{a=false}console.log(a);if(a){o=o.replace(/%2F/g,"/");e+="<li><a href='"+o+"' class='search-result-title' target='_blank'>"+n+"</a>";var v=s;if(h>=0){var d=h-20;var p=h+80;if(d<0){d=0}if(d==0){p=100}if(p>v.length){p=v.length}var g=v.substr(d,p);r.forEach(function(e){var t=new RegExp(e,"gi");g=g.replace(t,'<b class="search-keyword">'+e+"</b>")});e+='<p class="search-result">'+g+"...</p>"}e+="</li>"}});e+="</ul>";if(e.indexOf("<li>")===-1){return n.innerHTML=a+"<ul><span class='local-search-empty'>No result found.<span></ul>"}n.innerHTML=a+e})}});$(document).on("click","#local-search-close",function(){$("#local-search-input").val("");$("#local-search-result").html("")})};var getSearchFile=function(e){var t=e+"search.xml";searchFunc(t,"local-search-input","local-search-result")};
//rebuild by neat 